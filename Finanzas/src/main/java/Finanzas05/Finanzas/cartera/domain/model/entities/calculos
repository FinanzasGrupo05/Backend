import java.time.LocalDate;
import java.time.temporal.ChronoUnit;
import java.util.Scanner;

enum TipoTasa {
    NOMINAL, EFECTIVA
}

enum Capitalizacion {
    DIARIA(1), MENSUAL(30), BIMESTRAL(60), TRIMESTRAL(90), SEMESTRAL(180), ANUAL(360);

    private final int dias;
    Capitalizacion(int dias) {
        this.dias = dias;
    }
    public int getDias() {
        return dias;
    }
}

public class TasaEfectivaDiaria {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        System.out.print("Ingrese el valor nominal de la factura: ");
        double valorNominal = scanner.nextDouble();

        System.out.print("Ingrese los gastos iniciales: ");
        double gastosIniciales = scanner.nextDouble();

        System.out.print("Ingrese los gastos finales: ");
        double gastosFinales = scanner.nextDouble();

        System.out.print("Ingrese la tasa de descuento (en decimal, ej. 0.12 para 12%): ");
        double tasa = scanner.nextDouble();

        System.out.print("Ingrese el tipo de tasa (NOMINAL o EFECTIVA): ");
        TipoTasa tipoTasa = TipoTasa.valueOf(scanner.next().toUpperCase());

        System.out.print("Ingrese la capitalización (DIARIA, MENSUAL, TRIMESTRAL, etc.): ");
        Capitalizacion capitalizacion = Capitalizacion.valueOf(scanner.next().toUpperCase());

        System.out.print("Ingrese la fecha de vencimiento (YYYY-MM-DD): ");
        LocalDate fechaVencimiento = LocalDate.parse(scanner.next());

        System.out.print("Ingrese la fecha de descuento (YYYY-MM-DD): ");
        LocalDate fechaDescuento = LocalDate.parse(scanner.next());

        long diasPeriodo = ChronoUnit.DAYS.between(fechaDescuento, fechaVencimiento);
        System.out.printf("Días de periodo: %d\n", diasPeriodo);

        double capitalizacionDias = capitalizacion.getDias();

        double tasaEfectiva;
        if (tipoTasa == TipoTasa.NOMINAL) {
            tasaEfectiva = Math.pow(1 + (tasa / (360.0 / capitalizacion.getDias())), (1.0)) - 1;
        } else {
            tasaEfectiva = tasa;
        }

        double potencia = 1.0 / capitalizacion.getDias();
        double tasaDiaria = Math.pow(1 + tasaEfectiva, potencia) - 1;
        System.out.printf("Tasa efectiva diaria: %.6f\n", tasaDiaria);

        double tasaPeriodo = Math.pow(1 + tasa, (diasPeriodo / capitalizacionDias)) - 1;
        double tasaDescuento = tasaPeriodo / (1 + tasaPeriodo); // d%
        System.out.printf("Tasa de descuento: %.6f\n", tasaDescuento);

        double descuento = valorNominal * tasaDescuento;
        System.out.printf("Interés descontado: %.2f\n", descuento);

        double valorNeto = valorNominal * (1 - tasaDescuento);
        System.out.printf("Valor neto recibido: %.2f\n", valorNeto);

        double valorRecibido = valorNeto - gastosIniciales;
        double valorEntregado = valorNominal + gastosFinales;
        double tcea = Math.pow(valorEntregado / valorRecibido, 360.0 / diasPeriodo) - 1;

        System.out.printf("TCEA: %.6f\n", tcea);



        scanner.close();
    }
}